' pcm test cases


.restore
.range 1000


' testThatUninitializedMultiMappedStateCanBeRead

[action 1000]
.timefrom 44 00:00"00
.range 9999


' testThatUninitializedUnmappedStateThrows

[action 1010]
.timefrom 666 00:00"00
.range 9999


' testThatScriptHandlesMultiMappedValuesCorrectly

[action 1020]
.timefrom 44 INF
.range 1021 1022


' false
[action 1021]
.timeto 44 99:59"59
.range 1025

' true
[action 1022]
.else
.timeto 44 -INF
.range 1025


[action 1025]
.mustnot 44
.settime 44 00:10"00
.range 1026 1027


' false - it's just 00:10"00 before
[action 1026]
.timeto 44 -00:15"00
.range 1028 1029

' true - more than 00:09"00 left until 00:10"00
[action 1027]
.else
.timeto 44 -00:09"00
.range 1028 1029


' false - we're not yet at -00:05"00
[action 1028]
.timefrom 44 -00:05"00
.range 1030 1031

' true - it's 00:10"00 before or earlier
[action 1029]
.else
.timefrom 44 -00:10"00
.range 1030 1031


' true - for mapped state
[action 1030]
.must 44
.range 1035

' true - for unmapped state
[action 1031]
.mustnot 44
.range 1035


[action 1035]
.settime 44 -00:10"00
.range 1036

' always true for un-mapped as well for mapped state 
[action 1036]
.mustnot 44
.range 1037


[action 1037]
.set 44
.range 9999


' true - for mapped states, throws for unmapped states
[action 1038]
.timefrom 44 00:00"00
.timeto 44 00:00"01
.range 9999

' true - for unmapped states
[action 1039]
.must 44
.range 9999


' testThatStatesWithMultiplePeersWorkAsExpected

[action 1050]
.set 44            ' setting the cage set peers -> something on penis 23
.range 1051

[action 1051]
.must 23           ' true since mapping references this as a peer
.must 44
.range 1052

[action 1052]
.unset 23          ' unsetting something on penis only removes the place holder
.range 1053

[action 1053]
.must 23           ' still set because the chastity cage is still on the penis
.must 44
.range 1054

[action 1054]
.unset 44
.range 1055

[action 1055]
.mustnot 23           ' unset now because the chastity cage has been removed
.mustnot 44
.range 9999


' proper exit for all test cases
[action 9999]
.unset 9999
.quit
